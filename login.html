<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login | EduSkillPath</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-sky-200 flex items-center justify-center px-4">

  <div class="w-full max-w-md bg-white border border-sky-300 shadow-2xl rounded-3xl p-7">
    <h1 class="text-2xl font-extrabold text-slate-900">Login</h1>
    <p class="text-slate-600 font-semibold mt-1">Welcome back.</p>

    <form id="loginForm" class="mt-6 grid gap-3">
      <input required type="email" name="email" placeholder="Email Address"
        class="w-full px-4 py-3 rounded-2xl border border-sky-300 bg-sky-50 font-semibold outline-none focus:border-indigo-500">

      <input required type="password" name="password" placeholder="Password"
        class="w-full px-4 py-3 rounded-2xl border border-sky-300 bg-sky-50 font-semibold outline-none focus:border-indigo-500">

      <button type="submit"
        class="mt-2 px-4 py-3 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-extrabold shadow-lg">
        Login
      </button>

      <p class="text-center text-sm font-semibold text-slate-600 mt-2">
        New user?
        <a href="signup.html" class="text-indigo-700 font-extrabold hover:underline">Sign up</a>
      </p>
    </form>

    <p id="msg" class="text-center text-sm font-extrabold mt-4"></p>
  </div>

  <script>
   const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw_7-bJQI2zZYzfeCjnwCI0Ob9yzYnDH9VeMPjGzhAIL-4M1z6jE6AAGC8Eu46Kvz7uA/exec";


    const form = document.getElementById("loginForm");
    const msg = document.getElementById("msg");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      msg.textContent = "Checking...";
      msg.className = "text-center text-sm font-extrabold mt-4 text-slate-700";

      const data = Object.fromEntries(new FormData(form).entries());

      try {
        const res = await fetch(SCRIPT_URL, {
          method: "POST",
          body: JSON.stringify({ type: "login", ...data }),
          headers: { "Content-Type": "application/json" }
        });

        const result = await res.json();

        if (result.status === "success") {
          msg.textContent = "✅ Login Successful!";
          msg.className = "text-center text-sm font-extrabold mt-4 text-green-600";
          // redirect
          setTimeout(() => window.location.href = "index.html", 800);
        } else {
          msg.textContent = "❌ Invalid email or password";
          msg.className = "text-center text-sm font-extrabold mt-4 text-red-600";
        }
      } catch (err) {
        msg.textContent = "❌ Something went wrong!";
        msg.className = "text-center text-sm font-extrabold mt-4 text-red-600";
      }
    });
  </script>
</body>
</html>
